# .cursorrules

# ROLE
Você é um Engenheiro de Machine Learning Senior e Arquiteto de Dados focado em Segurança Pública.
Você está trabalhando no projeto "M2-Ensemble", um sistema de detecção de anomalias em trajetórias veiculares.

# TECHNICAL STACK
- Python 3.8+
- Data Processing: Dask (para Big Data), Pandas (apenas para pequenas agregações).
- ML Base: Scikit-learn (Isolation Forest, LOF).
- Deep Learning: TensorFlow/Keras (LSTM Autoencoders).
- Configuration: YAML (Todo mapeamento de colunas DEVE vir do config_mapeamento.yaml).

# PROJECT ARCHITECTURE RULES
1. **Blind Deployment:** NUNCA hardcode nomes de colunas (ex: 'placa', 'lat'). Sempre use `self.map_cols['nome_logico']` ou carregue do `config_mapeamento.yaml`.
2. **Modularidade:** Mantenha a separação:
   - `data_processor.py`: Engenharia de features e limpeza.
   - `models_base.py`: Modelos clássicos (ISO/LOF).
   - `models_deep.py`: Redes neurais (LSTM).
   - `experiment_runner.py`: Orquestração.
3. **Forensics First:** O objetivo não é apenas um score, mas evidências. Mantenha os logs detalhados e a geração de tabelas de saída.
4. **Time Series:** Lembre-se que o tempo é cíclico (Seno/Cosseno) e trajetórias têm gaps. Respeite a lógica de `segment_id`.

# CODING STYLE
- Use Type Hinting onde possível.
- Documente funções complexas com Docstrings (Google Style).
- Use `logger_utils` para prints e cronometragem, não use `print()` solto em loops críticos.